<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#1a1a2e">
    <meta name="description" content="Tradutor em tempo real com transcri√ß√£o de voz">
    
    <!-- iOS Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Tradutor">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/icon-180.png">
    <link rel="manifest" href="manifest.json">
    
    <title>Tradutor em Tempo Real</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <h1>üé§ Tradutor Voz</h1>
            <button id="settingsBtn" class="icon-btn" aria-label="Configura√ß√µes">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M12 1v6m0 6v6m7.07-7.07l-4.24 4.24m-5.66 0L4.93 11.93m14.14 0l-4.24 4.24m-5.66 0L4.93 4.93"></path>
                </svg>
            </button>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Status Bar -->
            <div class="status-bar">
                <div class="status-item">
                    <span id="statusText">Pronto</span>
                </div>
                <div class="status-item">
                    <span id="costDisplay">$0.000</span>
                </div>
            </div>

            <!-- VU Meter -->
            <div class="vu-meter-container">
                <div class="vu-meter">
                    <div id="vuMeterBar" class="vu-meter-bar"></div>
                </div>
            </div>

            <!-- Control Button -->
            <div class="control-section">
                <button id="recordBtn" class="record-btn" aria-label="Iniciar grava√ß√£o">
                    <svg class="icon-mic" width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                        <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
                    </svg>
                    <span id="recordBtnText">Iniciar</span>
                </button>
            </div>

            <!-- Language Selection -->
            <div class="language-section">
                <div class="lang-select-group">
                    <label for="inputLang">Idioma Entrada:</label>
                    <select id="inputLang" class="lang-select">
                        <option value="pt">Portugu√™s (BR)</option>
                        <option value="en">English</option>
                        <option value="ja">Êó•Êú¨Ë™û</option>
                        <option value="es">Espa√±ol</option>
                    </select>
                </div>
                <div class="lang-arrow">‚Üí</div>
                <div class="lang-select-group">
                    <label for="outputLang">Idioma Sa√≠da:</label>
                    <select id="outputLang" class="lang-select">
                        <option value="en">English</option>
                        <option value="pt">Portugu√™s (BR)</option>
                        <option value="ja">Êó•Êú¨Ë™û</option>
                        <option value="es">Espa√±ol</option>
                        <option value="fr">Fran√ßais</option>
                        <option value="zh">‰∏≠Êñá</option>
                    </select>
                </div>
            </div>

            <!-- Console Output -->
            <div class="console-container">
                <div id="console" class="console"></div>
            </div>
        </main>

        <!-- Settings Modal -->
        <div id="settingsModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Configura√ß√µes</h2>
                    <button id="closeSettings" class="icon-btn" aria-label="Fechar">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>

                <div class="modal-body">
                    <!-- API Keys -->
                    <div class="settings-section">
                        <h3>üîë Chaves de API</h3>
                        <div class="input-group">
                            <label for="deepinfraKey">DeepInfra API Key:</label>
                            <input 
                                type="password" 
                                id="deepinfraKey" 
                                class="api-input"
                                placeholder="sk-..."
                                autocomplete="password"
                                name="deepinfra-api-key"
                            >
                        </div>
                        <div class="input-group">
                            <label for="openaiKey">OpenAI API Key (Fallback):</label>
                            <input 
                                type="password" 
                                id="openaiKey" 
                                class="api-input"
                                placeholder="sk-..."
                                autocomplete="password"
                                name="openai-api-key"
                            >
                        </div>
                    </div>

                    <!-- TTS Settings -->
                    <div class="settings-section">
                        <h3>üîä S√≠ntese de Voz (TTS)</h3>
                        <div class="input-group">
                            <label for="ttsEnabled">
                                <input type="checkbox" id="ttsEnabled" checked>
                                Ativar TTS
                            </label>
                        </div>
                        <div class="input-group">
                            <label for="ttsSpeed">Velocidade: <span id="ttsSpeedValue">1.3x</span></label>
                            <input 
                                type="range" 
                                id="ttsSpeed" 
                                min="0.8" 
                                max="2.0" 
                                step="0.1" 
                                value="1.3"
                                class="slider"
                            >
                        </div>
                    </div>

                    <!-- Audio Settings -->
                    <div class="settings-section">
                        <h3>üéß Configura√ß√µes de √Åudio</h3>
                        <div class="input-group">
                            <label for="silenceThreshold">Limite de Sil√™ncio: <span id="silenceValue">-50 dBFS</span></label>
                            <input 
                                type="range" 
                                id="silenceThreshold" 
                                min="-60" 
                                max="-10" 
                                step="1" 
                                value="-50"
                                class="slider"
                            >
                        </div>
                        <div class="info-text">
                            ‚ÑπÔ∏è Use fones Bluetooth: o √°udio ser√° capturado e reproduzido automaticamente pelo fone conectado
                        </div>
                    </div>

                    <!-- Save Button -->
                    <button id="saveSettings" class="save-btn">Salvar Configura√ß√µes</button>

                    <!-- Cost Info -->
                    <div class="settings-section">
                        <h3>üí∞ Custos da Sess√£o</h3>
                        <div class="cost-breakdown" id="costBreakdown">
                            <p>Sess√£o: $0.000000</p>
                            <p>Estimativa/hora: $0.00</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Install Prompt (for iOS) -->
    <div id="installPrompt" class="install-prompt">
        <p>üì± Para instalar: toque em <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M16 13h-3V3h-2v10H8l4 4 4-4zM4 19h16v2H4z"/></svg> e depois "Adicionar √† Tela Inicial"</p>
        <button id="closeInstallPrompt" class="close-prompt">‚úï</button>
    </div>

    <script src="app.js"></script>
</body>
</html>
